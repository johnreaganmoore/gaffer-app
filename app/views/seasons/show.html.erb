<div class="background-image fields">
  <div class="container">
    <div class="card">

      <div id="season-map">
      </div>
      <div class="sport-indicator">
        <img src="https://www.svgimages.com/svg-image/s4/soccer-ball-icon-256x256.png" class="sport-icon"/>
      </div>
      <div class="content-section team-registration-block">
        <!-- <div class="season-logistics flow-text"> -->
        <div class="section-header">
          <h2><%= @season.league.name %></h2>
        </div>
        <!-- </div> -->
        <div class="section-block">
          <div class="team-registration-price flow-text">
            <span class="dollar-amount">$<%= @season.cost %></span>  ($<%= @season.cost_per_player_estimate %>/player for a team of <%= @season.team_size_estimate %>)
          </div>
          <!-- <div class="team-registration-deadline flow-text">
            Registration deadline: Feb. 18th
          </div> -->
        </div>
      </div>
        <div class="content-section">
          <div class="section-header">
            <h3>Basics</h3>
            <hr class="faint">
          </div>
          <div class="section-block">
              <!-- <span class="detail-label">Cost: </span> -->
              <ul>
                <li class="detail-value" style="list-style: circle outside">
                  Season begins <%= @season.start_date.strftime("%B #{@season.start_date.day.ordinalize}") %>
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  <% timeframe_array = [] %>
                  <% @season.timeframes.each do |timeframe| %>
                    <% timeframe_array.push(timeframe.friendly_label)  %>
                  <% end %>
                  Games played on <%= timeframe_array.to_sentence  %>
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  Games played at <a href="http://maps.google.com/maps?q=<%= @season.location %>"><%= @season.location %></a>
                </li>
              </ul>
          </div>
        </div>

          <div class="content-section">
            <div class="section-header">
              <h3>Format</h3>
              <hr class="faint">
            </div>
            <div class="section-block">
              <ul>
                <li class="detail-value" style="list-style: circle outside">
                  <%= @season.league.players_per_team %> v <%= @season.league.players_per_team %>
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  <%= @season.league.minutes_per_game %> minute games
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  <%= @season.league.facility_type %>
                </li>
              </ul>
            </div>
          </div>

          <!-- <div class="content-section">
            <div class="section-header">
              <h3>Details</h3>
              <hr class="faint">
            </div>
            <div class="section-block">
              <ul>
                <li class="detail-value" style="list-style: circle outside">
                  Roster limited to 15 players
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  Cleats allowed on turf
                </li>
                <li class="detail-value" style="list-style: circle outside">
                  Competitive level of play (former college and fit high school players)
                </li>
              </ul>
            </div>
          </div> -->

      <div class="edit-profile-actions card-actions--split card-action">
        <%= link_to season_path(@season), class: "waves-effect waves-light btn green darken-1" do %>
          Sign<span class="hide-on-small-only"> Me</span> Up!
        <% end %>
      </div>
    </div>

  </div>
</div>
<script>

  var mapStyle = [{"featureType":"water","elementType":"geometry","stylers":[{"color":"#e9e9e9"},{"lightness":17}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":20}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffffff"},{"lightness":17}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#ffffff"},{"lightness":29},{"weight":0.2}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":18}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#ffffff"},{"lightness":16}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#f5f5f5"},{"lightness":21}]},{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#dedede"},{"lightness":21}]},{"elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#ffffff"},{"lightness":16}]},{"elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#333333"},{"lightness":40}]},{"elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#f2f2f2"},{"lightness":19}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#fefefe"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#fefefe"},{"lightness":17},{"weight":1.2}]}]

  handler = Gmaps.build('Google');
  handler.buildMap({
    provider: {
      zoom:      12,
      center:    new google.maps.LatLng("<%= @season.location_lat %>", "<%= @season.location_long %>"),
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      styles:    mapStyle
    },
    internal: {id: 'season-map'},

  }, function(){

    markers = handler.addMarkers([
      {
        "lat": "<%= @season.location_lat %>",
        "lng": "<%= @season.location_long %>",
        "picture": {
          "url": "<%= image_path 'star-marker.png' %>",
          "width":  16,
          "height": 16
        },
        "infowindow": "This is the default location for the season: <%= @season.location %>"
      }
    ]);
    handler.bounds.extendWith(markers);
  });
</script>
